# Environment Variables for Restaurant Demo Server
# Copy this file to .env and replace with your actual values

# ==============================================================================
# REQUIRED - Server will not function properly without these
# ==============================================================================

# Node Environment
NODE_ENV=development

# OpenAI API Key (get from https://platform.openai.com/api-keys)
# Required for receipt scanning, chat, and Dumpling Hero features
OPENAI_API_KEY=sk-proj-ABC123...your_actual_openai_key_here

# Firebase Authentication - Choose ONE method:
# Option 1: Use Application Default Credentials (ADC) - Recommended for Render/GCP
FIREBASE_AUTH_TYPE=adc
GOOGLE_CLOUD_PROJECT=dumplinghouseapp

# Option 2: Use Service Account Key (for local development or non-GCP hosting)
# FIREBASE_SERVICE_ACCOUNT_KEY={"type":"service_account","project_id":"..."}

# ==============================================================================
# RECOMMENDED - For production scalability
# ==============================================================================

# Redis URL for distributed rate limiting (required for multi-instance deployments)
# Without this, rate limits are per-instance only
# REDIS_URL=redis://user:password@host:port

# Sentry DSN for error tracking and monitoring
# SENTRY_DSN=https://abc123@sentry.io/12345

# Sentry release version (for release tracking in Sentry dashboard)
# SENTRY_RELEASE=1.0.0

# Enable verbose chat debugging (logs conversation details)
# ENABLE_CHAT_DEBUG=false

# CORS allowed origins (comma-separated for multiple)
# ALLOWED_ORIGINS=https://your-app.com,https://admin.your-app.com

# Server port (defaults to 3001)
# PORT=3001

# Logging level: debug, info, warn, error
# LOG_LEVEL=info

# ==============================================================================
# RATE LIMITING - Optional, with sensible defaults
# ==============================================================================

# Combo generation endpoint
COMBO_UID_PER_MIN=6
COMBO_IP_PER_MIN=20
COMBO_DAILY_LIMIT=20

# Chat endpoint
CHAT_UID_PER_MIN=12
CHAT_IP_PER_MIN=30
CHAT_DAILY_LIMIT=60
CHAT_MAX_TOKENS=500

# Dumpling Hero endpoints
HERO_UID_PER_MIN=8
HERO_IP_PER_MIN=20
HERO_DAILY_LIMIT=30
HERO_PREVIEW_DAILY_LIMIT=40

# Receipt analysis endpoint
RECEIPT_ANALYZE_UID_PER_MIN=6
RECEIPT_ANALYZE_IP_PER_MIN=20

# ==============================================================================
# APP VERSION CONTROL - For forcing app updates
# ==============================================================================

# Minimum app version required (format: "1.0.0")
# Users with versions below this will be forced to update
# MINIMUM_APP_VERSION=1.0.0

# Current App Store version (for display purposes)
# CURRENT_APP_STORE_VERSION=1.0.0

# Custom message to show when update is required
# APP_UPDATE_MESSAGE=Please update to the latest version for new features and bug fixes.

# Force update even if app version meets minimum (true/false)
# FORCE_APP_UPDATE=false

# ==============================================================================
# TIMEZONE - For date calculations
# ==============================================================================

# Timezone for admin stats and daily quota resets (defaults to America/Chicago)
# STATS_TIMEZONE=America/Chicago

# ==============================================================================
# STRIPE (DEPRECATED - No longer used in production)
# ==============================================================================

# Stripe API Keys were previously used for checkout
# The app no longer uses Stripe - keeping for reference
# STRIPE_SECRET_KEY=sk_test_51ABC123...your_actual_stripe_test_key_here

# ==============================================================================
# SETUP GUIDES
# ==============================================================================

# üì± FOR LOCAL DEVELOPMENT:
# 1. Copy this file to .env
# 2. Set OPENAI_API_KEY (required for most features)
# 3. Either set FIREBASE_SERVICE_ACCOUNT_KEY or use ADC
# 4. Run: node backend-deploy/server.js

# ‚òÅÔ∏è FOR RENDER DEPLOYMENT:
# 1. In Render Dashboard ‚Üí Your Service ‚Üí Environment:
# 2. Set NODE_ENV=production
# 3. Set OPENAI_API_KEY
# 4. Set FIREBASE_AUTH_TYPE=adc and GOOGLE_CLOUD_PROJECT=dumplinghouseapp
# 5. Optionally set REDIS_URL if using Redis for rate limiting
# 6. Optionally set SENTRY_DSN for error tracking
# See RENDER_FIREBASE_SETUP.md for ADC configuration details
