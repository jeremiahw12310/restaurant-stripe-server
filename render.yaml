services:
  - type: web
    name: restaurant-stripe-server
    env: node
    plan: starter
    buildCommand: npm install
    startCommand: npm start  
    rootDir: backend-deploy
    autoDeploy: true
    scaling:
      minInstances: 1
      maxInstances: 3
      targetMemoryPercent: 80
      targetCPUPercent: 80
    envVars:
      - key: NODE_ENV
        value: production
      - key: OPENAI_API_KEY
        sync: false
      - key: RENDER
        value: true
      - key: FIREBASE_AUTH_TYPE
        value: adc
      - key: GOOGLE_CLOUD_PROJECT
        value: dumplinghouseapp
    healthCheckPath: /
    # Firebase ADC Setup - No service account keys required 
    # Force redeploy - Added admin notifications support (includeAdmins feature) 